.container.d-flex.flex-column.py-4{ style: "width: 1248px;" }
  .d-flex.justify-content-between
    = render PageHeaderComponent.new(title: "Agents" , description: t('agents.description'))
    .d-flex.align-items-center
      = render RoundedButtonComponent.new(link: "#{rest_url}/agents", target: '_blank', size: 'medium', title: t("components.go_to_api"))
      - if session[:user]
        .span.m-2
        = agents_create_button
  = turbo_frame_tag 'agents-list' do
    = render_alerts_container(AgentsController)
    - columns_names = ['name', 'acronym', 'affiliations', 'agentType', 'usages']
    - if session[:user] && session[:user].admin?
      - columns_names << 'actions'
    = render TableComponent.new(id: 'admin-agents-table', borderless: true, outline: true, paging: true, searching: true, sort_column: '0', server_side: true, ajax_url: '/ajax/agents/list', search_placeholder: "search agents", columns: columns_names) do |t|
      - t.header do |h|
        - h.th {t("agents.form.name")}
        - h.th {t("agents.form.acronym")}
        - h.th {t("agents.form.affiliations")}
        - h.th {t("agents.form.type")}
        - h.th {t("agents.index.usages")}
        - if current_user_admin?
          - h.th {t("agents.index.actions")}

      = render partial: 'agents/agent' , collection: @agents
      %tr.empty-state
        %td.text-center{:colspan => "6"}= t("agents.index.no_agents")
    :javascript
      $.fn.dataTable.ext.errMode = 'none';
      $("#admin_agents").dataTable()