= turbo_frame_tag 'agents-list' do
  = render_alerts_container(AgentsController)
  - columns_names = ['name', 'acronym', 'affiliations', 'agentType', 'usages']
  - if session[:user] && session[:user].admin?
    - columns_names << 'actions'
  = render TableComponent.new(id: 'admin-agents-table', borderless: true, outline: true, paging: true, searching: true, sort_column: '0', server_side: true, ajax_url: '/ajax/agents/list', search_placeholder: "search agents", columns: columns_names) do |t|
    - t.header do |h|
      - h.th {t("agents.form.name")}
      - h.th {t("agents.form.acronym")}
      - h.th {t("agents.form.affiliations")}
      - h.th {t("agents.form.type")}
      - h.th {t("agents.index.usages")}
      - if current_user_admin?
        - h.th {t("agents.index.actions")}

    = render partial: 'agents/agent' , collection: @agents
    %tr.empty-state
      %td.text-center{:colspan => "6"}= t("agents.index.no_agents")
  :javascript
    $.fn.dataTable.ext.errMode = 'none';
    $("#admin_agents").dataTable()