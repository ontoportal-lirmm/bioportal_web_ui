= turbo_frame_tag 'summary', target:"_top" do
  .summary-page-center.flex-column
    .summary-page-container
      .summary-page-sub-container
        .summary-page-first-row
          = render partial: 'ontologies/sections/metadata/ontology_description_section'
          = render partial: 'ontologies/sections/metadata/ontology_fairness_section'
          = render partial: 'ontologies/sections/metadata/ontology_relations_network'
          = render partial: 'ontologies/sections/metadata/ontology_submissions_section'
          = render partial: 'ontologies/sections/metadata/ontology_metrics_section'
        .summary-page-second-row
          = ontology_depiction_card
          = properties_card('Identifiers','text to describe identifiers section', @identifiers) do |values|
            = horizontal_list_container(values) do |v|
              = render LinkFieldComponent.new(value: v)

          = properties_dropdown('dates','Dates','', @dates_properties) do |value|
            = render DateTimeFieldComponent.new(value: value)

          = properties_dropdown('person_and_organization','Persons and organizations','', @agents_properties) do |values|
            = horizontal_list_container(values) do |v|
              = render ChipButtonComponent.new(type: "static",'data-controller':' tooltip', title: '', class: 'text-truncate', style: 'max-width: 280px; display:block; line-height: unset') do
                = display_agent(v, link: false)

          = properties_dropdown('link','Links','hiba', @links_properties)

          = properties_dropdown('projects_section','Projects and usage information','hiba', nil) do |c|
            - c.row do
              = render FieldContainerComponent.new do |f|
                - f.label do
                  Projects using #{@ontology.acronym}
                  = new_element_link('Create new project', new_project_path)

                - if @projects.empty?
                  = empty_state_message("No projects using #{@ontology.acronym}")
                - else
                  = horizontal_list_container(@projects) do |project|
                    = render ChipButtonComponent.new(url: project_path(project.acronym), text: project.name, type: "clickable")
            - properties_list_component(c, @projects_properties)

          = properties_dropdown('methodology','Methodology', 'Methodology help', @methodology_properties)

          = render Layout::CardComponent.new do |c|
            - c.header do  |h|
              - h.text do
                Visits
                - if visits_data(@ontology)
                  = link_to(@ontology.links["analytics"] + "?apikey=#{get_apikey}&format=csv", title: "Download as CSV") do
                    = inline_svg("summary/download.svg", width: '30px', height: '20px')

            = render Layout::ListComponent.new do |l|
              - l.row do
                = render partial: "visits"

          - unless @ontology.view?
            = render Layout::CardComponent.new do |d|
              - d.header do |h|
                - h.text do
                  Views of #{@ontology.acronym}
                  = new_element_link('Create new view', new_view_path(@ontology.id))
              = render Layout::ListComponent.new do |l|
                - l.row do
                  = render partial: 'ontology_views'

          - unless @submission_latest.nil?
            = javascript_include_tag("jsonld")
            = metadata_formats_buttons