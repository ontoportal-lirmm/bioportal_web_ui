= render_in_modal do
  = form_with url: "admin/search/#{params[:collection]}/data", method: 'get', data:{turbo: true} do
    %div.mb-2
      = text_input(label: 'Search query', name: "query", value: params[:query])
      %div.d-flex.my-1{style: 'gap: 10px'}
        = number_input(name: 'page', label: 'Page', value: params[:page] || 1)
        = number_input(name: 'page_size', label: 'Page size', value: params[:page_size] || 10)
    = form_save_button

  %div.my-1
    Found #{@count} documents
  = render TableComponent.new(id: 'collection_data', paging: true) do |t|
    - t.header do |h|
      - h.th { "ID" }
      - h.th { "Properties" }
    -  @docs.each do |d|
      - t.row do |r|
        - r.td {d['id']}
        - r.td do
          %div{data:{controller:"text-truncate", 'text-truncate-more-text-value': '+ Show more ...' , 'text-truncate-less-text-value': '- Show less ...'}}
            %div.overflow-hidden{'data-text-truncate-target': 'content', style: ' display: -webkit-box; -webkit-box-orient: vertical; -webkit-line-clamp: var(--read-more-line-clamp, 2);'}
              - d.each do |k,v|
                %div
                  #{k}: #{v}
            %div.btn.btn-link{data:{'text-truncate-target': 'button', 'action':"click->text-truncate#toggle"}}
              + Show all ...
