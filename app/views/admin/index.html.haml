- @title = t('admin.index.title')

%div
  %div.container
    %h3.my-1.py-5= t('admin.index.administration_console')
%div
  %div.container.my-3
    = render_alerts_container
    = render Display::AlertComponent.new(id: 'progress_message', type:'info')
    = render Display::AlertComponent.new(id: 'success_message', type:'success')
    = render Display::AlertComponent.new(id: 'error_message', type:'danger')
    = render Display::AlertComponent.new(id: 'info_message', type:'info')

%div
  %div.mx-1
    - sections = [t('admin.index.analytics'), t('admin.index.site_administration'),t('admin.index.ontology_administration'),  t('admin.index.licensing'), t('admin.index.users'), t('admin.index.metadata_administration'), t('admin.index.groups'), t('admin.index.categories'), t('admin.index.persons_and_organizations'), t('admin.index.sparql')]
    - selected = params[:section] || sections.first.downcase
    = render TabsContainerComponent.new(url_parameter: 'section') do |t|
      - sections.each do |section_title|
        - t.item(title: section_title.humanize,
                     path: '',
                     selected: section_title.downcase.eql?(selected.downcase),
                     page_name: '')
      - t.item_content do
        = render 'analytics'
      - t.item_content do
        = render 'main'
      - t.item_content do
        %div.ontologies_list_container.mt-3
          %table{:style => "float:left;"}
            %tr
              %td{:style => "white-space:nowrap;"}
                = t('admin.index.report_generated_on')
                &nbsp;&nbsp;
                %span.report_date_generated
                %a#refresh_report_action{:href => "javascript:;", :class => "link_button ui-button ui-widget ui-state-default ui-corner-all ui-button-text-only", :style => "margin-left:11px;"}
                  %span.ui-button-text{:class => "report_date_generated_button"}
          %p.tab_description{:style => "clear:both;"}
          %table#adminOntologies.zebra{:cellpadding => "0", :cellspacing => "0", :width => "100%"}
      - t.item_content do
        %div#renew-license-notice
          %table.table.table-sm.table-bordered.mt-5#license-table
            %thead
              %tr
                %th{scope: "col"}= t('admin.index.licensed_to')
                %th{scope: "col"}= t('admin.index.appliance_id')
                %th{scope: "col"}= t('admin.index.valid_till')
                %th{scope: "col"}= t('admin.index.days_remaining')
            %tbody

        %div.mb-5#renew-license-button
          = link_to(t('admin.index.renew_license'), new_admin_license_path, class: "btn btn-primary", role: "button", remote: "true")

        %div.mb-5#renew-license-form
      - t.item_content do
        %div.ontologies_list_container.mt-3
          %div.mx-auto.w-75
            = render TurboFrameComponent.new(id: 'users-list', src: users_path, loading: 'lazy')
      - t.item_content do
        = render partial: 'ontologies_metadata_curator/metadata_tab'
      - t.item_content do
        %div.ontologies_list_container.mt-3
          %div.mx-auto.w-75
            = render TurboFrameComponent.new(id: 'groups-list', src: admin_groups_path, loading: 'lazy')
      - t.item_content do
        %div.ontologies_list_container.mt-3
          %div.mx-auto.w-75
            = render TurboFrameComponent.new(id: 'categories-list', src: admin_categories_path, loading: 'lazy')
      - t.item_content do
        %div.ontologies_list_container.mt-3
          %div.mx-auto.w-75
            = render TurboFrameComponent.new(id: 'agents-list', src: agents_path, loading: 'lazy')
      - t.item_content do
        %div.container
          = sparql_query_container
