- @title = "Content Finder"
= form_tag('/content_finder', method: :get, 'data-turbo': true, novalidate: true) do
  .content-finder-container
    .inputs.w-50
      #graph_url
        = ontologies_selector(id: 'search-ontologies', name: 'acronym', selected: @acronym || '', placeholder: "Graph URL", multiple: false)
      #uri
        = render Input::UrlComponent.new(name: "uri", placeholder: "URI", value: params[:uri])
      #output_format
        = render Input::SelectComponent.new(name: "output_format", value: %w[html json xml ntriples turtle], selected: params[:output_format], multiple: false)
      #submit_button
        = render Buttons::RegularButtonComponent.new(id:'regular-button', value: "Fetch", variant: "primary", size: "slim", type:"submit")

- if @result && !@result.empty?
  %div.p-2.card.content-finder-result
    .clipboard-component-resource-content{style: 'position: absolute; right: 2%; top: 5px;'}
      = render ClipboardComponent.new(message: @result.to_s, show_content: false)
    %div.p-2{data: {controller: 'rdf-highlighter', 'rdf-highlighter-format-value': @format }}
      %pre.mb-0
        %code.d-block{style: 'text-wrap: pretty; word-break: break-all', data: {'rdf-highlighter-target': 'content'}}
          = @result

      %div.d-none{data: {'rdf-highlighter-target': 'loader'}}

- if params[:output_format] == "html"
  .content-finder-html-result.bg-white.p-2.card
    = render TurboFrameComponent.new(id:"concept_details" , src: "/ajax/class_details?&ontology=#{@acronym}&conceptid=#{CGI.escape(params[:uri])}&styled=false", loading: "lazy")
    
                    