- @title = t("home.index.title", site: $SITE)

- unless $FRONT_NOTICE.nil? || $FRONT_NOTICE.empty? || cookies[:front_page_notice_closed].eql?("true")
  :javascript
    function close_message(){
    var exdate = new Date();
    exdate.setDate(exdate.getDate() + 7);
    document.cookie="front_page_notice_closed=true; expires="+exdate.toGMTString();
    jQuery("#notice_message").hide();
    }

  %p#notice_message{:style => "padding: 10px; margin: 10px; border:1px solid #EFEFEF; background-color: #F9F9F9;"}
    = $FRONT_NOTICE
    \&nbsp;&nbsp;
    %a{:href => "#", :onclick => "close_message(); return false;", :style => "font-size: small; color: darkGray;"} [close]

.home-header-container
  .home-header-background
  .home-bubbles
    .home-random-bubbles
      %img{:src => asset_path("home-random-bubbles.svg")}/
    .home-bubble.home-bubble-one
      %a.h5{href:"/ontologies/#{@anal_ont_names[0]}", style: "color: white !important"}
        = @anal_ont_names[0]
      %p 
        = @anal_ont_numbers[0].to_s + " " + t('visits.visits')
    .home-bubble.home-bubble-two
      %a.h5{href:"/ontologies/#{@anal_ont_names[1]}", style: "color: white !important"}
        = @anal_ont_names[1]
      %p 
        = @anal_ont_numbers[1].to_s + " " + t('visits.visits')
    .home-bubble.home-bubble-three
      %a.h5{href:"/ontologies/#{@anal_ont_names[2]}", style: "color: white !important"}
        = @anal_ont_names[2]
      %p 
        = @anal_ont_numbers[2].to_s + " " + t('visits.visits')
    %a.home-bubble.home-bubble-four{:href => "/visits"}
      .h5 ...

  .home-header-title-container
    .home-header-title
      %h4
        = t('home.index.welcome', site: $SITE)
      %p
        = t('home.index.tagline')
      = ontologies_content_autocomplete
 
.home-body-container
  .home-section
    %h4= t('home.ontology_upload')
    %hr.home-section-line/
    %p= t('home.ontology_upload_desc')
    %p= t('home.ontology_upload_benefits', site: $SITE)
    .home-upload-benifits
      - @upload_benefits.each do |benefit|
        %div
          = inline_svg_tag 'check-outlined.svg'
          %p
            = benefit
    .home-ontologies-actions
      .home-upload-ontology-button
        = upload_ontology_button
      .discover-ontologies
        = discover_ontologies_button

  .home-section
    %h4
      = t('home.recommender_annotator')
    %hr.home-section-line/
    .home-card{'data-controller': 'sample-text'}
      %form{action: "/annotator_recommender_form", method: "post"}
        %textarea.home-recommendations-and-annotations{rows: "4" , placeholder: t('home.paste_text_prompt'), name: "input", 'data-sample-text-target': "input"}
        %input.d-none{type: "submit", name: "submit_button" ,value: "annotator", id: "annotator_submit"}/
        %input.d-none{type: "submit" , name: "submit_button" ,value: "recommender", id: "recommender_submit"}/
        .home-services-buttons.container
          .insert-sample-text-button{'data-action': 'click->sample-text#annotator_recommender', 'data-sample-text': t("annotator.sample_text")}
            %div
              = t('annotator.insert_sample_text')
            = inline_svg_tag 'icons/arrow-curved-up.svg'
          .home-get-recommendations{onclick: "submitRecommender()"}
            %p= t('home.get_recommendations')
            = inline_svg_tag "play.svg", class: "home-play-icon"
          .home-services-buttons
            .home-get-annotations{onclick: "submitAnnotator()"}
              %p= t('home.get_annotations')
              %img{:src => asset_path("play-white.svg")}/
  .home-section
    .home-section-sub-sections-container
      .home-sub-section-left
        %div.align-items
          %h4.margin-items= t('home.fairness')
          = render Display::InfoTooltipComponent.new(text: t('home.info_tooltip_text') )
          = fairness_link(style: 'margin-bottom: 6px; vertical-align: top;')
        %hr.home-section-line/
        .home-card.home-fair-scores
          %div.fair-scores-badge-section
            %h2.p-2.badge.badge-secondary.fair-scores-badge-margin
              = t('home.average')
              %span.badge.badge-light
                %span#fair-score-average
                  0 (0%)
            %h2.p-2.badge.badge-secondary.fair-scores-badge-margin
              = t('home.min')
              %span.badge.badge-light
                %span#fair-score-min
                  0 (0%)
            %h2.p-2.badge.badge-secondary.fair-scores-badge-margin
              = t('home.max')
              %span.badge.badge-light
                %span#fair-score-max
                  0 (0%)
          - if fairness_service_enabled?
            %div#fair-home{data:{controller:"fair-score-home"}}
              = render partial: "shared/fair_score_bars", locals: {data: nil}
            %a{:href => "/landscape#fairness_assessment"}
              %div.home-fair-details
                %p= t('home.fair_details')
         
      .home-sub-section-right
        %h4= t('home.twitter_news')
        %hr.home-section-line
        .home-card.home-twitter-news
          %a.twitter-timeline{"data-height" => "360", :href => "https://twitter.com/lagroportal?ref_src=twsrc%5Etfw"}
            .home-twitter-loader 
              = render LoaderComponent.new(type: 'pulsing')
          %script{:async => "", :charset => "utf-8", :src => "https://platform.twitter.com/widgets.js"}

  .home-section
    %h4
      = t('home.agroportal_figures', site: portal_name)
    %hr.home-section-line/
    .home-statistics-container
      .home-statistics
        .home-statistics-item
          %hr/
          %div
            %h4
              = format_number_abbreviated(@ont_count)
            %p= t("home.ontologies")
        .home-statistics-item
          %hr/
          %div
            %h4
              = format_number_abbreviated(@cls_count)
            %p= t("home.classes")
        .home-statistics-item
          %hr/
          %div
            %h4
              = format_number_abbreviated(@individuals_count)
            %p= t("home.individuals")
        .home-statistics-item
          %hr/
          %div
            %h4
              = format_number_abbreviated(@prop_count)
            %p= t("home.properties")
        .home-statistics-item
          %hr/
          %div
            %h4
              = format_number_abbreviated(@projects_count)
            %p= t("home.projects")
        .home-statistics-item
          %hr/
          %div
            %h4
              = format_number_abbreviated(@map_count)
            %p= t("home.mappings")
        .home-statistics-item
          %hr/
          %div
            %h4
              = format_number_abbreviated(@users_count)
            %p= t("home.users")
      .home-statistics-link.justify-content-end
        = link_to t("home.see_details"),'/statistics', target: "_blank"

  .home-section
    .home-statistics-container
      .home-support-title
        %p= t('home.support_and_collaborations')
        %hr.home-section-line/
      .home-support-items
        - $HOME_PAGE_LOGOS&.each do |logo|
          %a{href:logo[:url], target: "_blanc"}
            %img{src: asset_path(logo[:img_src])}
  
  .home-section
    .home-statistics-container
      .home-support-title
        %p= t('home.ontoportal_instances')
        %hr.home-section-line/
      .home-support-items
        - $PORTALS_INSTANCES&.each do |portal|
          %div.text-center
            = link_to portal[:link], target: '_blank', class: 'home-logo-instances', style: "background-color: #{portal[:color]}" do
              = inline_svg 'logo-white.svg', width: "35", height: "26"
            %p{style: "color: #{portal[:color]}"} 
              = portal[:portal]


:javascript
  function submitAnnotator(){
  document.getElementById("annotator_submit").click()
  }
  function submitRecommender(){
  document.getElementById("recommender_submit").click()
  }

